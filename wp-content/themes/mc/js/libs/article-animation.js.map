{"version":3,"names":[],"mappings":"","sources":["libs/article-animation.js"],"sourcesContent":["export class ArticleParallaxAnimation {\n  constructor(ttl, img) {\n    this.DOM = {};\n    this.DOM.ttl = ttl instanceof HTMLElement ? ttl : document.querySelector(ttl);\n    this.chars = this.DOM.ttl.innerHTML.trim().split('');\n    this.DOM.ttl.innerHTML = this._splitText();\n    this.DOM.chars = this.DOM.ttl.querySelectorAll('.char');\n    this.DOM.img = document.querySelector(img);\n    this.animate();\n  }\n\n  _splitText() {\n    return this.chars.reduce((acc, curr) => {\n      curr = curr.replace(/\\s+/, '&nbsp;');\n      return `${acc}<span class=\"char\">${curr}</span>`;\n    }, '');\n  }\n\n  animate() {\n    const palTl = gsap.timeline({\n      scrollTrigger: {\n        trigger: '.parallax',\n        start: 'top-=6 top', // appear-upの6px分を考慮\n        end: 'bottom-=6 25%', // appear-upの6px分を考慮\n        scrub: 1,\n        // markers: true,\n      },\n    });\n\n    palTl.addLabel('topLabel');\n\n    // 文字フェードアニメーション\n    this.DOM.chars.forEach((c, i) => {\n      palTl.fromTo(c, {\n        autoAlpha: 0,\n        y: 50,\n      },\n      {\n        autoAlpha: 1,\n        y: 0,\n        duration: 0.1,\n      }, `topLabel+=${i / 50}`);\n    });\n\n    // パララックス\n    palTl.fromTo(this.DOM.img, {\n      backgroundPositionY: 0,\n    },\n    {\n      backgroundPositionY: 100,\n      duration: 1,\n    }, 'topLabel');\n  }\n}\n\nexport class ArticleSlideAnimation {\n  constructor(items) {\n    this.DOM = {};\n    this.DOM.items = document.querySelectorAll(items);\n    this.animate();\n  }\n\n  animate() {\n    // 文字スライドアニメーション\n    const stagger = 0.05;\n\n    this.DOM.items.forEach((item) => {\n      const rect = item.querySelector('.slide__title .rect');\n      const label = item.querySelector('.slide__title .label');\n      const slideX = item.querySelector('.slide__text.slideX');\n\n      const slideTl = gsap.timeline({\n        scrollTrigger: {\n          trigger: item,\n          start: 'top 80%',\n          toggleActions: 'play none none none',\n          // markers: true,\n        },\n      });\n\n      slideTl.fromTo(\n        rect,\n        {\n          x: '-105%',\n        },\n        {\n          x: '105%',\n          duration: 1,\n          stagger,\n          ease: 'power3.inout',\n        },\n      );\n      slideTl.fromTo(\n        label,\n        {\n          alpha: 0,\n        },\n        {\n          alpha: 1,\n          duration: 0.3,\n          delay: 0.5,\n          stagger,\n        },\n        '<',\n      );\n      slideTl.fromTo(\n        slideX,\n        {\n          alpha: 0,\n          x: -32,\n        },\n        {\n          alpha: 1,\n          x: 0,\n          duration: 0.75,\n          delay: 0.2,\n          stagger,\n          ease: 'power3.out',\n        },\n        '<',\n      );\n    });\n  }\n}\n"],"file":"article-animation.js"}