{"version":3,"names":[],"mappings":"","sources":["libs/about-animation.js"],"sourcesContent":["export class AboutAnimation {\n  constructor(el) {\n    this.DOM = {};\n    this.DOM.el = el;\n    this.animate();\n  }\n\n  animate() {\n    // Horizontal\n    const inner = this.DOM.el.querySelector('.about__inner');\n    const wrapper = this.DOM.el.querySelector('.about__list-wrapper');\n    const list = this.DOM.el.querySelector('.about__list');\n    const img = this.DOM.el.querySelector('.about__img');\n    const line = this.DOM.el.querySelector('.about__line');\n    const lineInner = this.DOM.el.querySelector('.about__line-inner');\n    const sections = Array.from(list.children);\n\n    const scrollTween = gsap.to(list, {\n      // 横スクロール（左方向へ移動）なので、xプロパティにはマイナスを指定\n      // リスト最後尾をラッパー右端に合わせて、box-shadow分をマイナスして表示\n      // 例：-(3540px - 850px) - 10px = -2700px\n      x: () => -(list.clientWidth - wrapper.clientWidth) - 10,\n      ease: 'none',\n      scrollTrigger: {\n        trigger: this.DOM.el,\n        start: 'top 5%',\n        end: () => `+=${(list.clientWidth - wrapper.clientWidth) + 10}`,\n        scrub: true,\n        pin: true,\n        anticipatePin: 1, // ページのガタつきを防ぐ\n        invalidateOnRefresh: true, // リサイズ時に再計算\n        // markers: true,\n      },\n    });\n\n    // inner-active\n    ScrollTrigger.create({\n      trigger: sections,\n      start: 'top 75%',\n      toggleClass: { targets: inner, className: 'about-inner-active' },\n      once: true,\n      // markers: true,\n    });\n\n    // img-scrub\n    gsap.fromTo(\n      img,\n      {\n        y: 15,\n        scale: 0.75,\n      },\n      {\n        scale: 1,\n        y: 0,\n        ease: 'none',\n        duration: 1,\n        scrollTrigger: {\n          trigger: this.DOM.el,\n          start: 'top 5%',\n          end: () => `+=${list.clientWidth - wrapper.clientWidth}`,\n          scrub: 2,\n          // markers: true,\n        },\n      },\n    );\n\n    // scroll-line\n    const lineTl = gsap.timeline({\n      scrollTrigger: {\n        trigger: this.DOM.el,\n        start: 'top 5%',\n        end: () => `+=${list.clientWidth - wrapper.clientWidth}`,\n        scrub: true,\n        // markers: true,\n        onEnter: () => {\n          // console.log('onEnter is called');\n          line.classList.add('line-active');\n          img.classList.add('bg-active');\n        },\n        onEnterBack: () => {\n          // console.log('onEnterBack is called');\n          line.classList.add('line-active');\n          img.classList.add('bg-active');\n        },\n        onLeaveBack: () => {\n          // console.log('onLeaveBack is called');\n          line.classList.remove('line-active');\n          img.classList.remove('bg-active');\n        },\n        onLeave: () => {\n          // console.log('onLeave is called');\n          line.classList.remove('line-active');\n          img.classList.remove('bg-active');\n        },\n      },\n    });\n\n    lineTl.fromTo(lineInner,\n      { width: 0 },\n      { width: '100%' });\n\n    // text-section\n    sections.forEach((section) => {\n      const number = section.querySelector('.about__item-content-number');\n      const title = section.querySelector('.about__item-content-title');\n      const texts = section.querySelectorAll('.about__item-content-text');\n\n      // タイムライン\n      const aboutTl = gsap.timeline({\n        scrollTrigger: {\n          trigger: section,\n          containerAnimation: scrollTween,\n          start: 'left 60%',\n          // markers: true,\n        },\n      });\n\n      aboutTl.fromTo(\n        number,\n        {\n          opacity: 0,\n          scale: 0,\n        },\n        {\n          opacity: 1,\n          scale: 1,\n          yPercent: -100,\n          duration: 0.4,\n          ease: 'power4.easeOut',\n        },\n      );\n      aboutTl.to(\n        number,\n        {\n          xPercent: 200,\n          skewX: -30,\n          duration: 1.2,\n          ease: 'power4.easeOut',\n        },\n        '>',\n      );\n      aboutTl.from(\n        title,\n        {\n          y: 50,\n          opacity: 0,\n          duration: 0.4,\n          ease: 'power4.easeOut',\n        },\n        '<',\n      );\n      aboutTl.from(\n        texts,\n        {\n          x: 128,\n          opacity: 0,\n          duration: 0.8,\n          ease: 'Back.easeOut',\n          stagger: 0.3,\n        },\n        '>',\n      );\n      aboutTl.add(() => {\n        title.classList.toggle('underline-active');\n        section.classList.toggle('box-shadow-active');\n      },\n      '-=0.5');\n    });\n  }\n}\n"],"file":"about-animation.js"}